#!/bin/bash
BOX_ARCH_FOR_PATCHELF="$(grep '^FREETZ_TARGET_ARCH_ENDIANNESS_DEPENDENT=' .config | awk -F'"' '{print $2}' | xargs)" 2>/dev/null
if [ $BOX_ARCH_FOR_PATCHELF = $PATCHELF_MIPS ]
	then
		sed -i "s+# FREETZ_TOOLS_PATCHELF_VERSION_ABANDON is not set+FREETZ_TOOLS_PATCHELF_VERSION_ABANDON=y+g" $FREETZ_SSL_HOME_PATH/.config
		sed -i "s+FREETZ_TOOLS_PATCHELF_VERSION_CURRENT=y+# FREETZ_TOOLS_PATCHELF_VERSION_CURRENT is not set+g" $FREETZ_SSL_HOME_PATH/.config
		make patchelf-host-precompiled FREETZ_VERBOSITY_LEVEL=2
elif [ $BOX_ARCH_FOR_PATCHELF = $PATCHELF_MIPSEL ]
	then
		sed -i "s+# FREETZ_TOOLS_PATCHELF_VERSION_ABANDON is not set+FREETZ_TOOLS_PATCHELF_VERSION_ABANDON=y+g" $FREETZ_SSL_HOME_PATH/.config
		sed -i "s+FREETZ_TOOLS_PATCHELF_VERSION_CURRENT=y+# FREETZ_TOOLS_PATCHELF_VERSION_CURRENT is not set+g" $FREETZ_SSL_HOME_PATH/.config
		make patchelf-host-precompiled FREETZ_VERBOSITY_LEVEL=2
fi
