#!/bin/bash

# Disable various Freetz options
sed -i -e "s+FREETZ_PACKAGE_CALLMONITOR=y+# FREETZ_PACKAGE_CALLMONITOR is not set+g" \
	-e "s+FREETZ_PACKAGE_PHONEBOOK_TOOLS=y+# FREETZ_PACKAGE_PHONEBOOK_TOOLS is not set+g" \
	-e "s+FREETZ_BUSYBOX___V127_UUENCODE=y+# FREETZ_BUSYBOX___V127_UUENCODE is not set+g" \
	-e "s+FREETZ_BUSYBOX___V127_NC_SERVER=y+# FREETZ_BUSYBOX___V127_NC_SERVER is not set+g" \
	-e "s+FREETZ_BUSYBOX___V136_UUENCODE=y+# FREETZ_BUSYBOX___V136_UUENCODE is not set+g" \
	-e "s+FREETZ_BUSYBOX___V136_NC_SERVER=y+# FREETZ_BUSYBOX___V136_NC_SERVER is not set+g" \
	"$FREETZ_SSL_HOME_PATH/.config"

# Remove specified options from the configuration
for option in FREETZ_BUSYBOX_NC_SERVER \
	FREETZ_BUSYBOX_UUENCODE \
	FREETZ_PACKAGE_CALLMONITOR_webif \
	FREETZ_PACKAGE_CALLMONITOR_actions \
	FREETZ_PACKAGE_CALLMONITOR_monitor \
	FREETZ_PACKAGE_CALLMONITOR_phonebook; do
	grep -v "$option" "$FREETZ_SSL_HOME_PATH/.config" > "$FREETZ_SSL_HOME_PATH/tempdatei" && \
	mv "$FREETZ_SSL_HOME_PATH/tempdatei" "$FREETZ_SSL_HOME_PATH/.config"
done
